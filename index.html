<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="eosreel/css/bootstrap.css">
  <link rel="stylesheet" href="eosreel/css/default.css">
  <link rel="Stylesheet" type="text/css" href="eosreel/css/wSelect.css">
  <meta charset="utf-8">
  <title>Swiper demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="css/swiper.css">

  <!-- Demo styles -->
</head>
<body>
  <!-- Swiper -->
  <div class="swiper-container">
    <div class="swiper-wrapper">

      <div class="swiper-slide" page="eosreel.html">

      </div>
      
      <div class="swiper-slide" page="eosreel2.html">

      </div>

    </div>
    <!-- Add Pagination -->
    <div class="swiper-pagination"></div>
  </div>

  <button style="position:absolute; top: 10px; left: 20px;z-index: 99999;" class="normal_slot_btn" >일반슬롯</button>

  <button style="position:absolute; top: 40px; left: 20px;z-index: 99999;" class="free_slot_btn">프리스핀</button>

  <!-- Swiper JS -->
  <script src="js/swiper.js"></script>
  <script src="js/jquery-3.3.1.js"></script>

  <!-- Initialize Swiper -->
  <script>
    var swiper = new Swiper('.swiper-container', {
      pagination: {
        // el: '.swiper-pagination',
        // clickable: true,
        // renderBullet: function (index, className) {
        //   return '<span class="' + className + '">' + (index + 1) + '</span>';
        // },
      },
      on: {
          slideChangeTransitionEnd: function() {
            console.log('slideChangeTransitionEnd ');
            loadPage();
          }
      },
      pagination: false,

      effect: 'fade', //"slide", "fade", "cube", "coverflow" or "flip"

    });


    function loadPage() {

      console.log('Current slide index is ['+swiper.activeIndex+']')
      var targetUrl = $('.swiper-slide').eq(swiper.activeIndex).attr('page');
      var container = $('.swiper-slide').eq(swiper.activeIndex);

      // targetUrl = 'https://seaoh.github.io/swiper-test/' + targetUrl;

      //기존 slider contents 삭제 (요기서 메모리 삭제??)
      $('.swiper-slide').empty();
      
      console.log('targetUrl=', targetUrl);

      $(container).load(targetUrl, (response, status, xhr)=> {
        // console.log('response ', response);
        console.log('status ', status);
        console.log('xhr ', xhr);
      })

    }

    $(document).ready(() => {
      loadPage();
    });

    $('.normal_slot_btn').on('click', ()=> {

        swiper.slideTo(0);
    })

    $('.free_slot_btn').on('click', ()=> {

        swiper.slideTo(1);
    })

  </script>


</body>
</html>
